<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Course note of A/B testing on Udacity: Lesson 5
'><title>Analyzing Results</title>

<link rel='canonical' href='http://cyfz11.com/posts/analyzing-results/'>

<link rel="stylesheet" href="/scss/style.min.1b167e2cb0123f4ab756c1f7b38280839833cb553987f96fa7aaeacb7f4f71de.css"><meta property='og:title' content='Analyzing Results'>
<meta property='og:description' content='Course note of A/B testing on Udacity: Lesson 5
'>
<meta property='og:url' content='http://cyfz11.com/posts/analyzing-results/'>
<meta property='og:site_name' content='Nothingness'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='course notes' /><meta property='article:tag' content='data analytics' /><meta property='article:tag' content='A/B testing' /><meta property='article:published_time' content='2020-03-22T15:20:00&#43;00:00'/><meta property='article:modified_time' content='2020-03-22T15:20:00&#43;00:00'/>
<meta name="twitter:title" content="Analyzing Results">
<meta name="twitter:description" content="Course note of A/B testing on Udacity: Lesson 5
">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huda2458f72ce188392d75c5d51cd8e24e_373_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <h1 class="site-name"><a href="/">Nothingness</a></h1>
        <h2 class="site-description"></h2></header>

    <ol class="menu" id="main-menu">
        
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/course-notes/" >
                course notes
            </a>
        
            <a href="/categories/data-analytics/" >
                data analytics
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/posts/analyzing-results/">Analyzing Results</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 22, 2020</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    5 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p><em>Course note of <a class="link" href="https://www.udacity.com/course/ab-testing--ud257"  target="_blank" rel="noopener"
    >A/B testing on Udacity</a>: Lesson 5</em></p>
<hr>
<p>#Analyzing Results</p>
<h2 id="sanity-checks">Sanity checks</h2>
<p><strong>check invariant metrics</strong></p>
<ol>
<li>population sizing metrics based on unit of diversion: experiment population and control population is comparable</li>
<li>other metrics that should not change in experiments</li>
</ol>
<h3 id="choosing-invariants">Choosing Invariants</h3>
<ul>
<li>
<p>Quiz: (choose the invariant metrics, that is, <strong>choose the metrics that would be the same in experiment and control group</strong>)</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkd9glnxyj31ng0u0qv5.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>1st: user-id is the unit of diversion, so #signed in users are random in experiment group and control groups. For #cookies and #events, they are not directely randomized, but since #signed users are randomized, these two should be split evenly. If they are not split evenly, then there are some users in onne group who are likely to produce cookies or events, and we should figure oput why. For CTR, it is before course list page, so change in course list will not influence it. For time to complete, change in course list to cause the easiest course to the top of the list, which will cause the change of time to complete.</li>
</ul>
</li>
<li>
<p>2nd: Similarly, #events are unit of diversion and random. Since #signed users and #cookies are &ldquo;larger&rdquo; than unit of diversion, they are also invariant. CTR happens before viewing videos and is not affected. For time to complete, <strong>it is impossible to calculate since the unit of diversion is event, and it is possible that one user is both in experiment group and control group</strong>. Even it can measure, the change of load time will also influence the time to complete because longer loading time may distract users, then users will need longer time to complete course.</p>
</li>
<li>
<p>Quiz:</p>
<p>Change location of sign-in button: control: in course list page, and if user tries to enroll in a course without signing in, they are prompted to sign in; experiment: sign in added to every page, includes homepage.</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkda3143zj31hw0u0npd.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>My answer: 1,3,5</p>
<p>1st: same with the last quiz, these population metrics are invariant</p>
<p>2nd: &ldquo;Start now&rdquo; button is on homepage, so adding sign-in button to homepage will affect it.</p>
<p>3rd: Users often enroll a course after signing in, so change sign-in rate will influence praobability of enrolling. (I think the probability of enrolling above means #users enrolled/#users signed-in)</p>
<p>4th: will change</p>
<p>5th: will not influence video load time</p>
</li>
</ul>
<h3 id="checking-invariants">Checking Invariants</h3>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkdmbo1noj31g50u0npd.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>Firstly, calculate total number; Then, if there is any problem, break down to see data on every day.</p>
<ul>
<li>
<p><strong>How to figure out whether this difference in within expectation?</strong></p>
<p>Since each cookie is randomly assigned to group with probability = 0.5, so <strong>the #cookies in one group follows binomial distribution</strong>.</p>
</li>
</ul>
<p>Since the number of cookies in the example above is greater than 120000, assume it to be a normal distribution.</p>
<ol>
<li>
<p>Look at the total number and calculate the confidence interval:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbke3dyb0fj31ie0u01ky.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
<li>
<p>Look at the data of each day:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbke8jqjutj31hw0u0e82.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
<li>
<p>How to solve:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbke9s4r2dj31td0u04qp.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
</ol>
<ul>
<li>
<p>Quiz:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkehnfajdj31ed0rd7wf.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
<li>
<p>What if do not pass sanity check?</p>
<ol>
<li>
<p>check where is the problem:</p>
<p>(1)is there something wrong technically? is there anything wrong with infrastructure/experiment setup/ experiement diversion</p>
<p>(2) retrospective analysis</p>
<p>(3) check whether there is problem in pre-period(lesson 4 design an experiment) or just in real experiment</p>
</li>
<li>
<p>most common reasons: data capture, maybe not capture correctly, or change too quick; experiment setup, maybe prolem with filter; infrastructure, etc,</p>
</li>
</ol>
</li>
</ul>
<h2 id="single-metrics">Single Metrics</h2>
<p>In lesson 1, there is a similar example with click-through-probability and in that example we assume binomial; In this example, we measure click-through-rate, which is more like Poisson distribution (in lesson 4). For poisson distribution, it is harder to calculate analytically, so calculate empirically.</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkg5hnh0uj31hl0u07wi.jpg"
	
	
	
	loading="lazy"
	
	
><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkg5p3tstj31hp0u0x6p.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>Double check with sign test: (what is the probability that result of 7 days are positive?)</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkg9teaq5j31hf0u0b2a.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>P-value = 0.0156 &lt; 0.05 ($\alpha$)  (it is two-tail p-value)</p>
<ul>
<li>
<p>Quiz:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkhnmem68j31jc0u0kjm.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbkhp67mnzj31ca0nuql3.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>
<p>calculate:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbki12fqv4j31mr0u0hdt.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbki1vs4exj31d20oo4mj.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><a class="link" href="https://www.graphpad.com/quickcalcs/binomial1/"  target="_blank" rel="noopener"
    >https://www.graphpad.com/quickcalcs/binomial1/</a></p>
</li>
<li>
<p>Why it happenes (one is significant while another is not) and how to deal with?</p>
<ol>
<li>sign test has lower power</li>
<li>Break down to look at each day, we can find that on weekends, they are all positive; In fact, the experiment is much stronger on weekends (confidence interval: weekends: (0.0361, 0.0553), weekdays: (-0.0078, 0.0043) )</li>
<li>Recommend not launch this experiment right now, and figure out why it is much stronger on weekends.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="gotchas">Gotchas</h3>
<p>Other problems can cause difference on sign test and confidence interval:</p>
<ul>
<li>
<p>Simpson&rsquo;s Paradox</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbki9uo2xxj31vy0kwha2.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>Why: More women applied to B, which has a lower accpeted rate.</p>
<p>create some number to show this paradox:</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gblcdc7l8nj31b70n9aqv.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gblcde92knj31b70n9aqv.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
</ul>
<h2 id="multiple-metrics">Multiple Metrics</h2>
<h3 id="difference-between-single-metrics-and-multiple-metrics">Difference between single metrics and multiple metrics:</h3>
<ol>
<li>The more metrics, the more likely to see significant chance just by chance.But it shouldn&rsquo;t be repeatale if breaking into days, or slice, or bootstrap.</li>
<li>Techniques &ldquo;Multiple Comparison&rdquo;: automatic detection of differences</li>
</ol>
<h4 id="show-difference">Show difference</h4>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbldugg2i0j31l90u0npd.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbldujx31kj31l90u0npd.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<!-- raw HTML omitted -->
<h4 id="how-to-deal-with">How to deal with:</h4>
<ol>
<li>
<p>use Bonferroni correction, simple but it tends to be conservative</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbldqhuw9bj31ik0u0kjl.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbldsymb9vj31hy0u04qq.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p>How to get the z score when $\alpha = 0.0125$?</p>
<p>This is a z score table (attention to the table entry):</p>
<p>$\alpha = 0.0125$       $\alpha/2 = 0.00625$</p>
<p>In the table, it corresponds to z = -2.50 (0.0062)</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbll3ykp2fj30u0167kjl.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
<li>
<p>Judgment call, family wise error rate, false discovery rate</p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbll4muzrej31vq0tbe81.jpg"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://tva1.sinaimg.cn/large/006tNbRwgy1gbll6h5o53j31qx0u0npd.jpg"
	
	
	
	loading="lazy"
	
	
></p>
</li>
</ol>
<h4 id="how-to-recommend">how to recommend?</h4>
<ol>
<li>Multiple metrics can be unruly</li>
<li>Find an overall metric (OEC): understand the problem and goal of company, balance long term and short term</li>
</ol>
<h4 id="draw-conclusion">draw conclusion</h4>
<ol>
<li><strong>do you understand the change?</strong></li>
<li>do you want to launch the change?
<ul>
<li>Are there statistical significance and practical significance?</li>
<li>Do we understand what the changes done to the user experience?</li>
<li>is it worth it?</li>
</ul>
</li>
</ol>
<h2 id="gotches">Gotches</h2>
<ol>
<li>
<p>Ramp-up experiment; Gradually increase the size of experiment (and also remove filters in Google)</p>
</li>
<li>
<p>Effect may faltten out when ramp up the change</p>
</li>
<li>
<p>capture the seasonal effect: holdback: launch change to everyone except a small holdback (a set of users do not get the change)</p>
</li>
<li>
<p>Effect can also faltten out because of a novelty effect or change aversion (users find /adopt to the change or change their adoption to the change): just like measure learning effect, use pre- and post- period, combined with cohort analysis.</p>
</li>
</ol>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/course-notes/">course notes</a>
        
            <a href="/tags/data-analytics/">data analytics</a>
        
            <a href="/tags/a/b-testing/">A/B testing</a>
        
    </section>


    </footer>


    
</article>

    

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/posts/design-an-experiment/">
        
        

        <div class="article-details">
            <h2 class="article-title">Design an Experiment</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/choosing-and-characterizing-metrics/">
        
        

        <div class="article-details">
            <h2 class="article-title">Choosing and Characterizing metrics</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/policy-and-ethics-for-experiments/">
        
        

        <div class="article-details">
            <h2 class="article-title">Policy and Ethics for Experiments</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/overview-of-ab-testing/">
        
        

        <div class="article-details">
            <h2 class="article-title">Overview of A/B Testing</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/sentiment-analysis/">
        
        

        <div class="article-details">
            <h2 class="article-title">Sentiment Analysis</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2022 Nothingness
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.8.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
